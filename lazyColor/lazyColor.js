/**
 * almond 0.2.5 Copyright (c) 2011-2012, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

(function(){var e,t,n;(function(r){function d(e,t){return h.call(e,t)}function v(e,t){var n,r,i,s,o,u,a,f,c,h,p=t&&t.split("/"),d=l.map,v=d&&d["*"]||{};if(e&&e.charAt(0)===".")if(t){p=p.slice(0,p.length-1),e=p.concat(e.split("/"));for(f=0;f<e.length;f+=1){h=e[f];if(h===".")e.splice(f,1),f-=1;else if(h===".."){if(f===1&&(e[2]===".."||e[0]===".."))break;f>0&&(e.splice(f-1,2),f-=2)}}e=e.join("/")}else e.indexOf("./")===0&&(e=e.substring(2));if((p||v)&&d){n=e.split("/");for(f=n.length;f>0;f-=1){r=n.slice(0,f).join("/");if(p)for(c=p.length;c>0;c-=1){i=d[p.slice(0,c).join("/")];if(i){i=i[r];if(i){s=i,o=f;break}}}if(s)break;!u&&v&&v[r]&&(u=v[r],a=f)}!s&&u&&(s=u,o=a),s&&(n.splice(0,o,s),e=n.join("/"))}return e}function m(e,t){return function(){return s.apply(r,p.call(arguments,0).concat([e,t]))}}function g(e){return function(t){return v(t,e)}}function y(e){return function(t){a[e]=t}}function b(e){if(d(f,e)){var t=f[e];delete f[e],c[e]=!0,i.apply(r,t)}if(!d(a,e)&&!d(c,e))throw new Error("No "+e);return a[e]}function w(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function E(e){return function(){return l&&l.config&&l.config[e]||{}}}var i,s,o,u,a={},f={},l={},c={},h=Object.prototype.hasOwnProperty,p=[].slice;o=function(e,t){var n,r=w(e),i=r[0];return e=r[1],i&&(i=v(i,t),n=b(i)),i?n&&n.normalize?e=n.normalize(e,g(t)):e=v(e,t):(e=v(e,t),r=w(e),i=r[0],e=r[1],i&&(n=b(i))),{f:i?i+"!"+e:e,n:e,pr:i,p:n}},u={require:function(e){return m(e)},exports:function(e){var t=a[e];return typeof t!="undefined"?t:a[e]={}},module:function(e){return{id:e,uri:"",exports:a[e],config:E(e)}}},i=function(e,t,n,i){var s,l,h,p,v,g=[],w;i=i||e;if(typeof n=="function"){t=!t.length&&n.length?["require","exports","module"]:t;for(v=0;v<t.length;v+=1){p=o(t[v],i),l=p.f;if(l==="require")g[v]=u.require(e);else if(l==="exports")g[v]=u.exports(e),w=!0;else if(l==="module")s=g[v]=u.module(e);else if(d(a,l)||d(f,l)||d(c,l))g[v]=b(l);else{if(!p.p)throw new Error(e+" missing "+l);p.p.load(p.n,m(i,!0),y(l),{}),g[v]=a[l]}}h=n.apply(a[e],g);if(e)if(s&&s.exports!==r&&s.exports!==a[e])a[e]=s.exports;else if(h!==r||!w)a[e]=h}else e&&(a[e]=n)},e=t=s=function(e,t,n,a,f){return typeof e=="string"?u[e]?u[e](t):b(o(e,t).f):(e.splice||(l=e,t.splice?(e=t,t=n,n=null):e=r),t=t||function(){},typeof n=="function"&&(n=a,a=f),a?i(r,e,t,n):setTimeout(function(){i(r,e,t,n)},4),s)},s.config=function(e){return l=e,l.deps&&s(l.deps,l.callback),s},n=function(e,t,n){t.splice||(n=t,t=[]),!d(a,e)&&!d(f,e)&&(f[e]=[e,t,n])},n.amd={jQuery:!0}})(),n("../vendor/almond",function(){}),n("utils",[],function(){var e=/^([0-9a-f]{3}){1,2}$/i,t=function(t){return t[0]==="#"&&(t=t.substr(1)),e.test(t)?t:!1};return{isColor:t}}),n("tbody",[],function(){function e(e,t){this.data=null,this.lastD=null,this.$first=null,this.$el=null,this.el=null,this.paper=null,this.rows=null,this.weights={l:1,a:1,b:1,h:0,s:0,v:0},this.postSort=null,this.init(e,t)}e.prototype.distance=function(e,t){return Math.abs(e.l-t.l)+Math.abs(e.a-t.a)+Math.abs(e.b-t.b)+this.weights.h*Math.abs(e.h-t.h)+this.weights.s*Math.abs(e.s-t.s)+this.weights.v*Math.abs(e.v-t.v)},e.prototype.init=function(e,t){t=t||{},this.$el=e,this.el=e[0],this.paper=d3.select(this.el),this.rows=this.paper.selectAll("tr"),this.postSort=t.postSort},e.prototype.setWeight=function(e,t){this.weights[e]=t,this.lastD&&this.sort(this.lastD)},e.prototype.sort=function(e){var t=this;for(var n=0,r=this.data.length;n<r;n++)this.data[n].distance=this.distance(e,this.data[n]);this.rows.sort(function(e,t){return e.distance-t.distance}),this.postSort&&this.postSort(e),setTimeout(function(){t.$first.css("backgroundColor",e.hex)},1);var i=$("html, body");i.filter(":animated").length||i.animate({scrollTop:0}),this.lastD=e};var t=function(e){var t=Color.convert(e[1].substr(1),"lab"),n=Color.convert(e[1].substr(1),"hsv");return t.name=e[0],t.hex=e[1],t.h=n.h,t.s=n.s,t.v=n.v,t},n=function(e){var t="LAB: "+e.l.toFixed(2)+","+e.a.toFixed(2)+","+e.b.toFixed(2)+" HSV: "+e.h+","+e.s+","+e.v;return'<td style="background-color: transparent;">&nbsp;</td><td style="background-color: '+e.hex+';" title="'+t+'">'+'<span class="named" style="background-color: '+e.name+';">&nbsp;</span>&nbsp;</td>'+'<td class="name">'+e.name+"</td>"+'<td class="hex">'+e.hex+"</td>"};return e.prototype.setColors=function(e){var r=this;this.data=e.map(t),this.rows=this.rows.data(this.data),this.rows.enter().append("tr").html(n).on("click",function(e){r.sort(e)}),this.rows.html(n),this.rows.exit().remove(),this.$first=this.$el.find("tr > td:nth-child(1)")},e.prototype.newColor=function(e){if(e&&e==this._oldColor)return;this.sort(t(["unknown","#"+e])),this._oldColor=e},e}),n("history",["utils"],function(e){var t=$("#colorTable > tbody"),n=$("#colorInput"),r=location.protocol.substr(0,4)=="http"&&location.href.substr(location.href.length-1)=="/"&&window.history&&window.history.pushState,i={basePath:location.pathname,newPath:function(e){return this.basePath+e+"/"},title:$("head > title").html(),newTitle:function(e){return t.find("tr:first > td.name").text()+" "+this.title}};$(window).on("popstate",function(){var e=history.state;if(!e||!e.color)return;n.val(e.color),$(".input-label").text(e.color)});var s=location.href,o=s.match(/([\w]+)\/?$/)[1];if(e.isColor(o)){var u=location.pathname.split("/");u.pop(),u.pop(),i.basePath=u.join("/")+"/",n.val(o).change(),$(".input-label").text(o)}return i}),t.config({urlArgs:"_"+(new Date).getTime()}),t(["utils","tbody","history"],function(e,t,n){var r={w3ccolors:[["aliceblue","#f0f8ff"],["antiquewhite","#faebd7"],["aqua","#00ffff"],["aquamarine","#7fffd4"],["azure","#f0ffff"],["beige","#f5f5dc"],["bisque","#ffe4c4"],["black","#000000"],["blanchedalmond","#ffebcd"],["blue","#0000ff"],["blueviolet","#8a2be2"],["brown","#a52a2a"],["burlywood","#deb887"],["cadetblue","#5f9ea0"],["chartreuse","#7fff00"],["chocolate","#d2691e"],["coral","#ff7f50"],["cornflowerblue","#6495ed"],["cornsilk","#fff8dc"],["crimson","#dc143c"],["cyan","#00ffff"],["darkblue","#00008b"],["darkcyan","#008b8b"],["darkgoldenrod","#b8860b"],["darkgray","#a9a9a9"],["darkgreen","#006400"],["darkgrey","#a9a9a9"],["darkkhaki","#bdb76b"],["darkmagenta","#8b008b"],["darkolivegreen","#556b2f"],["darkorange","#ff8c00"],["darkorchid","#9932cc"],["darkred","#8b0000"],["darksalmon","#e9967a"],["darkseagreen","#8fbc8f"],["darkslateblue","#483d8b"],["darkslategray","#2f4f4f"],["darkslategrey","#2f4f4f"],["darkturquoise","#00ced1"],["darkviolet","#9400d3"],["deeppink","#ff1493"],["deepskyblue","#00bfff"],["dimgray","#696969"],["dimgrey","#696969"],["dodgerblue","#1e90ff"],["firebrick","#b22222"],["floralwhite","#fffaf0"],["forestgreen","#228b22"],["fuchsia","#ff00ff"],["gainsboro","#dcdcdc"],["ghostwhite","#f8f8ff"],["gold","#ffd700"],["goldenrod","#daa520"],["gray","#808080"],["green","#008000"],["greenyellow","#adff2f"],["grey","#808080"],["honeydew","#f0fff0"],["hotpink","#ff69b4"],["indianred","#cd5c5c"],["indigo","#4b0082"],["ivory","#fffff0"],["khaki","#f0e68c"],["lavender","#e6e6fa"],["lavenderblush","#fff0f5"],["lawngreen","#7cfc00"],["lemonchiffon","#fffacd"],["lightblue","#add8e6"],["lightcoral","#f08080"],["lightcyan","#e0ffff"],["lightgoldenrodyellow","#fafad2"],["lightgray","#d3d3d3"],["lightgreen","#90ee90"],["lightgrey","#d3d3d3"],["lightpink","#ffb6c1"],["lightsalmon","#ffa07a"],["lightseagreen","#20b2aa"],["lightskyblue","#87cefa"],["lightslategray","#778899"],["lightslategrey","#778899"],["lightsteelblue","#b0c4de"],["lightyellow","#ffffe0"],["lime","#00ff00"],["limegreen","#32cd32"],["linen","#faf0e6"],["magenta","#ff00ff"],["maroon","#800000"],["mediumaquamarine","#66cdaa"],["mediumblue","#0000cd"],["mediumorchid","#ba55d3"],["mediumpurple","#9370db"],["mediumseagreen","#3cb371"],["mediumslateblue","#7b68ee"],["mediumspringgreen","#00fa9a"],["mediumturquoise","#48d1cc"],["mediumvioletred","#c71585"],["midnightblue","#191970"],["mintcream","#f5fffa"],["mistyrose","#ffe4e1"],["moccasin","#ffe4b5"],["navajowhite","#ffdead"],["navy","#000080"],["oldlace","#fdf5e6"],["olive","#808000"],["olivedrab","#6b8e23"],["orange","#ffa500"],["orangered","#ff4500"],["orchid","#da70d6"],["palegoldenrod","#eee8aa"],["palegreen","#98fb98"],["paleturquoise","#afeeee"],["palevioletred","#db7093"],["papayawhip","#ffefd5"],["peachpuff","#ffdab9"],["peru","#cd853f"],["pink","#ffc0cb"],["plum","#dda0dd"],["powderblue","#b0e0e6"],["purple","#800080"],["red","#ff0000"],["rosybrown","#bc8f8f"],["royalblue","#4169e1"],["saddlebrown","#8b4513"],["salmon","#fa8072"],["sandybrown","#f4a460"],["seagreen","#2e8b57"],["seashell","#fff5ee"],["sienna","#a0522d"],["silver","#c0c0c0"],["skyblue","#87ceeb"],["slateblue","#6a5acd"],["slategray","#708090"],["slategrey","#708090"],["snow","#fffafa"],["springgreen","#00ff7f"],["steelblue","#4682b4"],["tan","#d2b48c"],["teal","#008080"],["thistle","#d8bfd8"],["tomato","#ff6347"],["turquoise","#40e0d0"],["violet","#ee82ee"],["wheat","#f5deb3"],["white","#ffffff"],["whitesmoke","#f5f5f5"],["yellow","#ffff00"],["yellowgreen","#9acd32"]],hexcolors:[["Abacas","#ABACA5"],["Abbess","#ABBE55"],["Accede","#ACCEDE"],["Access","#ACCE55"],["Accost","#ACC057"],["Acetal","#ACE7A1"],["Affect","#AFFEC7"],["Afloat","#AF10A7"],["Albata","#A1BA7A"],["Albedo","#A1BED0"],["Aldose","#A1D05E"],["Allele","#A11E1E"],["Assess","#A55E55"],["Assets","#A55E75"],["Allest","#A77E57"],["Babble","#BABB1E"],["Badass","#BADA55"],["Baffle","#BAFF1E"],["Balata","#BA1A7A"],["Balboa","#BA1B0A"],["Ballad","#BA11AD"],["Ballet","#BA11E7"],["Ballot","#BA1107"],["Basalt","#BA5A17"],["Basset","#BA55E7"],["Battle","#BA771E"],["Beaded","#BEADED"],["Beetle","#BEE71E"],["Befall","#BEFA11"],["Befool","#BEF001"],["Belted","#BE17ED"],["Blotto","#B10770"],["Bobble","#B0BB1E"],["Bobcat","#B0BCA7"],["Boobee","#B00BEE"],["Boodle","#B00D1E"],["Booted","#B007ED"],["Bootee","#B007ED"],["Bottle","#B0771E"],["Cabala","#CABA1A"],["Cabbie","#CABB1E"],["Cablet","#CAB1E7"],["Calces","#CA1CE5"],["Casaba","#CA5ABA"],["Castle","#CA571E"],["Catalo","#CA7A10"],["Cattle","#CA771E"],["Closed","#C105ED"],["Closet","#C105E7"],["Cobalt","#C0BA17"],["Cobble","#C0BB1E"],["Coddle","#C0DD1E"],["Coffee","#C0FFEE"],["Coffle","#C0FF1E"],["Collet","#C011E7"],["Cosset","#C055E7"],["Dabble","#DABB1E"],["Doddle","#D0DD1E"],["Debase","#DEBA5E"],["Decade","#DECADE"],["Decaff","#DECAFF"],["Decode","#DEC0DE"],["Deface","#DEFACE"],["Defeat","#DEFEA7"],["Defect","#DEFEC7"],["Delete","#DE1E7E"],["Detect","#DE7EC7"],["Detest","#DE7E57"],["Doodle","#D00D1E"],["Dossal","#D055A1"],["Dotted","#D077ED"],["Dottle","#D0771E"],["Efface","#EFFACE"],["Effect","#EFFEC7"],["Effete","#EFFE7E"],["Eldest","#E1DE57"],["Fabled","#FAB1ED"],["Faeces","#FAECE5"],["Fallal","#FA11A1"],["Fasces","#FA5CE5"],["Feeble","#FEEB1E"],["Felloe","#FE110E"],["Festal","#FE57A1"],["Fettle","#FE771E"],["Fleece","#F1EECE"],["Floats","#F10A75"],["Fiasco","#F1A5C0"],["Footed","#F007ED"],["Footle","#F0071E"],["LabLab","#1AB1AB"],["Lessee","#1E55EE"],["Loaded","#10ADED"],["Locale","#10CA1E"],["Obsess","#0B5E55"],["Obtect","#0B7EC7"],["Obtest","#0B7E57"],["0celot","#0CE107"],["Offset","#0FF5E7"],["Oldest","#01DE57"],["Oddles","#00D1E5"],["Osteal","#057EA1"],["Saddle","#5ADD1E"],["Salade","#5A1ADE"],["Sallet","#5A11E7"],["Salted","#5A17ED"],["Sealed","#5EA1ED"],["Secede","#5ECEDE"],["Select","#5E1EC7"],["Setose","#5E705E"],["Settee","#5E77EE"],["Settle","#5E771E"],["Solace","#501ACE"],["Sotted","#5077ED"],["Stable","#57AB1E"],["Stacte","#57AC7E"],["Steels","#57EE15"],["Tables","#7AB1E5"],["Tablet","#7AB1E7"],["Tassle","#7A55E1"],["Tasset","#7A55E7"],["Tattle","#7A771E"],["Tattoo","#7A7700"],["Teasel","#7EA5E1"],["Testee","#7E57EE"],["Testes","#7E57E5"],["Toddle","#70DD1E"],["Toffee","#70FFEE"],["Tootle","#70071E"]]},i=$("#colorInput"),s="btn-primary";$('<a class="btn btn-info btn-mini">Ok, I got it!</a>').on("click",function(){$("div.top").height($("div.controls").outerHeight()),$("p.intro").hide(500)}).appendTo($("p.intro")),i.on("keyup change",function(){var t=e.isColor(i.val());t&&o.newColor(t)}),$("#weight-h").on("change",function(){o.setWeight("h",this.value)}),$("#weight-s").on("change",function(){o.setWeight("s",this.value)}),$("#weight-v").on("change",function(){o.setWeight("v",this.value)}),$("#colors-picker .btn").click(function(){var e=$(this);if(e.hasClass(s))return;e.addClass(s).siblings().removeClass(s),o.setColors(r[e.attr("rel")])});var o=new t($("#colorTable > tbody"),{postSort:function(e){i.val(e.hex),$(".input-label").text(e.hex)}});o.setColors(r.w3ccolors)}),n("main",function(){})})();